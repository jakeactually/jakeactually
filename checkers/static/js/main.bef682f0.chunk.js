(this["webpackJsonpcheckers-front"]=this["webpackJsonpcheckers-front"]||[]).push([[0],{45:function(e,t,n){},77:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),r=n(9),o=n.n(r),s=(n(45),n(17)),i=n(11),u=n.n(i),l=n(27),j=n(19),d=n(10),b=n.n(d),f=n(14),x=n(13),h=n(2),O=0,p=function(e,t){return function n(){var c=new WebSocket("wss://jakeactually.com/checkers/api/State/".concat(e.id));c.onmessage=function(e){t(++O),console.log(e)},c.onerror=function(e){console.log(e),setTimeout(n,1e3)}}},m=n(1),y=function(e){var t=e.tileSize,n=e.offset,c=e.cell,a=e.mouse,r=e.current,o=e.setCurrent,s=e.path,i=e.setPath,u=s.some((function(e){return r&&c.x===e.x&&c.y===e.y}));if(c.isNoPiece)return Object(m.jsx)("div",{className:"square ".concat(u?"yellow":"")});var l=[null,"Red","Blue","RedQueen","BlueQueen"][c.tag];if(r&&c.x===r.x&&c.y===r.y)return Object(m.jsx)("div",{className:"square ".concat(u?"yellow":""),children:Object(m.jsx)("img",{src:l?"/checkers/".concat(l,".svg"):null,className:"tile",draggable:!1,style:{left:a.x,top:a.y}})});var d=function(e){e.preventDefault(),i([].concat(Object(j.a)(s),[{x:c.x,y:c.y}])),o({x:c.x,y:c.y})};return Object(m.jsx)("div",{className:"square ".concat(u?"yellow":""),onMouseDown:d,onTouchStart:d,children:Object(m.jsx)("img",{src:l?"/checkers/".concat(l,".svg"):null,className:"tile",style:{left:c.x*t+t/2+n.x,top:c.y*t+t/2+n.y}})})};function v(){var e=Object(h.g)().params,t=Object(s.useToasts)().addToast,n=Object(c.useState)(null),a=Object(x.a)(n,2),r=a[0],o=a[1],i=Object(c.useState)({x:0,y:0}),d=Object(x.a)(i,2),O=d[0],v=d[1],g=Object(c.useState)(null),w=Object(x.a)(g,2),k=w[0],S=w[1],N=Object(c.useState)([]),T=Object(x.a)(N,2),M=T[0],R=T[1],E=Object(c.useState)(0),P=Object(x.a)(E,2),C=P[0],z=P[1],B=Object(c.useState)({connect:p(e,z)}),D=Object(x.a)(B,1)[0].connect,F=function(){var e=Math.min(window.innerHeight,window.innerWidth)/8,t=Math.abs(window.innerHeight-window.innerWidth)/2;return{tileSize:e,offset:window.innerWidth>window.innerHeight?{x:t,y:0}:{x:0,y:t}}}(),W=F.tileSize,q=F.offset;Object(c.useEffect)((function(){!function(e){document.body.ontouchmove=function(t){var n=t.targetTouches[0];e({x:n.pageX,y:n.pageY})},document.body.onmousemove=function(t){e({x:t.clientX,y:t.clientY})}}(v),D()}),[]),Object(c.useEffect)((function(){Object(f.a)(b.a.mark((function t(){var n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.a.get("Room/".concat(e.id));case 2:n=t.sent,S(n.data.board);case 4:case"end":return t.stop()}}),t)})))()}),[C]);var H={x:Math.floor((O.x-q.x)/W),y:Math.floor((O.y-q.y)/W)};if(r&&(H.x>=0&&H.x<=7&&H.y>=0&&H.y<=7)&&H.x%2===H.y%2&&!M.some((function(e){return H.x===e.x&&H.y===e.y}))&&R([].concat(Object(j.a)(M),[H])),!k)return Object(m.jsx)("div",{className:"Error",children:"Room is already playing"});var I=function(e,t,n,c,a,r,o,s,i){return Object(f.a)(b.a.mark((function n(){var o,l;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e&&!(t.length<2)){n.next=4;break}return a(null),r([]),n.abrupt("return");case 4:if((o=t[t.length-1]).x%2===o.y%2){n.next=10;break}return a(null),r([]),n.abrupt("return");case 10:return n.prev=10,n.next=13,u.a.post("Turn/".concat(s.id),t);case 13:l=n.sent,c(l.data.board),n.next=20;break;case 17:n.prev=17,n.t0=n.catch(10),i(n.t0.response.data,{appearance:"error",autoDismiss:!0});case 20:a(null),r([]);case 22:case"end":return n.stop()}}),n,null,[[10,17]])})))}(r,M,0,S,o,R,0,e,t);return Object(m.jsx)("div",{className:"App",onTouchEnd:I,onMouseUp:I,children:Object(m.jsx)("div",{className:"board",children:k.map((function(e,t){return Object(m.jsx)("div",{className:"row",children:e.map((function(e,n){return Object(m.jsx)(y,{tileSize:W,offset:q,cell:Object(l.a)(Object(l.a)({},e),{},{x:n,y:t}),mouse:O,current:r,setCurrent:o,path:M,setPath:R},n)}))},t)}))})})}function g(){var e=Object(h.f)();return Object(c.useEffect)((function(){Object(f.a)(b.a.mark((function t(){var n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.a.get("Index");case 2:n=t.sent,console.log(n.data),e.push("/Room/".concat(n.data));case 5:case"end":return t.stop()}}),t)})))()}),[]),null}var w=n(16);u.a.defaults.baseURL="/checkers/api/";var k=function(){return Object(m.jsx)(w.a,{basename:"/checkers",children:Object(m.jsx)(s.ToastProvider,{children:Object(m.jsx)("div",{children:Object(m.jsxs)(h.c,{children:[Object(m.jsx)(h.a,{path:"/Room/:id",children:Object(m.jsx)(v,{})}),Object(m.jsx)(h.a,{path:"/",children:Object(m.jsx)(g,{})})]})})})})},S=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,78)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,o=t.getTTFB;n(e),c(e),a(e),r(e),o(e)}))};o.a.render(Object(m.jsx)(a.a.StrictMode,{children:Object(m.jsx)(k,{})}),document.getElementById("root")),S()}},[[77,1,2]]]);
//# sourceMappingURL=main.bef682f0.chunk.js.map